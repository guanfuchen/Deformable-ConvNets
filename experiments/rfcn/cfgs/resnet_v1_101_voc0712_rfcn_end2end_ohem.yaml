---
MXNET_VERSION: "mxnet"
# 设置网络模型日志等相关输出路径，一般为./output/rfcn/voc，也就是./output/$Net/$Dataset
output_path: "./output/rfcn/voc"
# 训练的网络的mxnet symbol
symbol: resnet_v1_101_rfcn
gpus: '0,1,2,3'
CLASS_AGNOSTIC: true
# 训练的尺度大小限制
SCALES:
- 600
- 1000
default:
  frequent: 100
  # kvstore为device
  kvstore: device
network:
  # 网络与训练模型路径=pretrained+pretrained_epoch
  pretrained: "./model/pretrained_model/resnet_v1_101"
  pretrained_epoch: 0
  PIXEL_MEANS:
  - 103.06
  - 115.90
  - 123.15
  IMAGE_STRIDE: 0
  RCNN_FEAT_STRIDE: 16
  RPN_FEAT_STRIDE: 16
  FIXED_PARAMS:
  - conv1
  - bn_conv1
  - res2
  - bn2
  - gamma
  - beta
  FIXED_PARAMS_SHARED:
  - conv1
  - bn_conv1
  - res2
  - bn2
  - res3
  - bn3
  - res4
  - bn4
  - gamma
  - beta
  ANCHOR_RATIOS:
  - 0.5
  - 1
  - 2
  ANCHOR_SCALES:
  - 8
  - 16
  - 32
  NUM_ANCHORS: 9
dataset:
  # 数据集目标检测的类别
  NUM_CLASSES: 21
  # 这里的数据集类型为PascalVOC
  dataset: PascalVOC
  # 数据集具体目录
  dataset_path: "./data/VOCdevkit"
  # 不同的图像集用+分割开来，这里图像集包括2007_trainval和2012_trainval数据集
  image_set: 2007_trainval+2012_trainval
  # 数据集根目录
  root_path: "./data"
  # 测试图像数据集为2007_test
  test_image_set: 2007_test
  # 模型区域建议产生于selective search或者RPN网络
  proposal: rpn
TRAIN:
  # 训练学习率和lr_step
  lr: 0.0005
  lr_step: '4.83'
  warmup: true
  warmup_lr: 0.00005
  # typically we will use 4000 warmup step for single GPU on VOC
  warmup_step: 1000
  # 训练开始的周期
  begin_epoch: 0
  # 训练结束的周期
  end_epoch: 7
  # 模型前缀，以模型+数据集为命名
  model_prefix: 'rfcn_voc'
  # whether resume training
  # 是否继续训练
  RESUME: false
  # whether flip image
  # 是否对称图像
  FLIP: true
  # whether shuffle image
  # 是否随机图像处理顺序
  SHUFFLE: true
  # whether use OHEM
  ENABLE_OHEM: true
  # size of images for each device, 2 for rcnn, 1 for rpn and e2e
  # 每一个GPU设备中训练的图像大小，RCNN网络训练位2，RPN网络和e2e网络训练为1
  BATCH_IMAGES: 1
  # e2e changes behavior of anchor loader and metric
  END2END: true
  # group images with similar aspect ratio
  # 将相似的aspect ratio图像组合在一起
  ASPECT_GROUPING: true
  # R-CNN
  # rcnn rois batch size
  BATCH_ROIS: -1
  BATCH_ROIS_OHEM: 128
  # rcnn rois sampling params
  FG_FRACTION: 0.25
  # rcnn rois采样参数中前景overlapes阈值0.5
  FG_THRESH: 0.5
  # rcnn rois采样参数中背景最大和最小的overlapes
  BG_THRESH_HI: 0.5
  BG_THRESH_LO: 0.0
  # rcnn bounding box regression params
  BBOX_REGRESSION_THRESH: 0.5
  BBOX_WEIGHTS:
  - 1.0
  - 1.0
  - 1.0
  - 1.0

  # RPN anchor loader
  # rpn anchors batch size
  RPN_BATCH_SIZE: 256
  # rpn anchors sampling params
  RPN_FG_FRACTION: 0.5
  RPN_POSITIVE_OVERLAP: 0.7
  RPN_NEGATIVE_OVERLAP: 0.3
  RPN_CLOBBER_POSITIVES: false
  # rpn bounding box regression params
  RPN_BBOX_WEIGHTS:
  - 1.0
  - 1.0
  - 1.0
  - 1.0
  RPN_POSITIVE_WEIGHT: -1.0
  # used for end2end training
  # RPN proposal
  CXX_PROPOSAL: false
  RPN_NMS_THRESH: 0.7
  RPN_PRE_NMS_TOP_N: 6000
  RPN_POST_NMS_TOP_N: 300
  RPN_MIN_SIZE: 0
  # approximate bounding box regression
  BBOX_NORMALIZATION_PRECOMPUTED: true
  BBOX_MEANS:
  - 0.0
  - 0.0
  - 0.0
  - 0.0
  BBOX_STDS:
  - 0.1
  - 0.1
  - 0.2
  - 0.2
TEST:
  # use rpn to generate proposal
  HAS_RPN: true
  # size of images for each device
  # 每一个GPU设备处理的图像batch
  BATCH_IMAGES: 1
  # RPN proposal
  CXX_PROPOSAL: false
  RPN_NMS_THRESH: 0.7
  RPN_PRE_NMS_TOP_N: 6000
  RPN_POST_NMS_TOP_N: 300
  RPN_MIN_SIZE: 0
  # RPN generate proposal
  PROPOSAL_NMS_THRESH: 0.7
  PROPOSAL_PRE_NMS_TOP_N: 20000
  PROPOSAL_POST_NMS_TOP_N: 2000
  PROPOSAL_MIN_SIZE: 0
  # RCNN nms
  NMS: 0.3
  test_epoch: 7

